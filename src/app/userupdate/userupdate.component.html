<form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="form1">

  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" class="my-custom-class">
    <mat-tab label="User-Details">
      <div class="totalDetails">
        <div class="userdetails form-group">
          <div class="form-group">
            <label for="username" class="label-width">Username:</label>
            <div class="inputtag">
              <input type="text" id="username" formControlName="username"
                [ngClass]="{ 'is-invalid': isControlInvalid('username') }">
              <div *ngIf="isControlInvalid('username')" class="invalid-feedback">
                Username is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="fullname" class="label-width">Full Name:</label>
            <div class="inputtag">
              <input type="text" id="fullname" formControlName="fullname"
                [ngClass]="{ 'is-invalid': isControlInvalid('fullname') }">
              <div *ngIf="isControlInvalid('fullname')" class="invalid-feedback">
                Full Name is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="password" class="label-width">Password:</label>
            <div class="inputtag">
              <input type="password" id="password" formControlName="password"
                [ngClass]="{ 'is-invalid': isControlInvalid('password') }">
              <div *ngIf="isControlInvalid('password')" class="invalid-feedback">
                Password is required and should be at least 6 characters.
              </div>
            </div>
          </div>


          <div class="form-group">
            <label for="confirmpassword" class="label-width">Confirm Password:</label>
            <div class="inputtag">
              <input type="password" id="confirmpassword" formControlName="confirmpassword"
                [ngClass]="{ 'is-invalid': isControlInvalid('confirmpassword') }">
              <div *ngIf="isControlInvalid('confirmpassword')" class="invalid-feedback">
                Confirm Password is required and should be at least 6 characters.
              </div>
            </div>
          </div>



          <div class="form-group">
            <label for="department" class="label-width">Department:</label>
            <select id="department" class="check1" formControlName="department">
              <option value="HR">HR</option>
              <option value="IT">IT</option>
              <option value="Sales">Sales</option>
            </select>
            <div *ngIf="isControlInvalid('department')" class="invalid-feedback">
              Department is required.
            </div>
          </div>


        </div>



        <div class="contactdetails form-group">
          <!-- <div class="form-group">
            <label for="department" class="label-width">Department:</label>
            <div class="inputtag">
              <input type="text" id="department" formControlName="department">
            </div>
          </div> -->
          <div class="form-group">
            <label for="agent" class="label-width">Agent:</label>
            <select id="agent" class="check" formControlName="agent">
              <option value="Simply Health">Simply Health</option>
              <option value="Genasys">Genasys</option>
              <option value="Standard Bank">Standard Bank</option>
            </select>
            <div *ngIf="isControlInvalid('agent')" class="invalid-feedback">
              Agent is required.
            </div>
          </div>

          <div class="form-group">
            <label for="email" class="label-width">Email:</label>
            <div class="inputtag">
              <input type="email" id="email" formControlName="email"
                [ngClass]="{ 'is-invalid': isControlInvalid('email') }">
              <div *ngIf="isControlInvalid('email')" class="invalid-feedback">
                Email is required and should be in a valid format.
              </div>
            </div>
          </div>



          <div class="form-group">
            <label for="homephone" class="label-width">Home-Phone:</label>
            <div class="inputtag">
              <input type="text" id="homephone" formControlName="homephone"
                [ngClass]="{ 'is-invalid': isControlInvalid('homephone') }">
              <div *ngIf="isControlInvalid('homephone')" class="invalid-feedback">
                Home-Phone is not valid.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="description" class="label-width">description:</label>
            <div class="inputtag">
              <input type="text" id="description" formControlName="description"
                [ngClass]="{ 'is-invalid': isControlInvalid('description') }">
              <div *ngIf="isControlInvalid('description')" class="invalid-feedback">
                Home-Phone is not valid.
              </div>
            </div>
          </div>


          <div class="form-group">
            <label for="Language" class="label-width">Language:</label>
            <select id="Language" class="check" formControlName="agent">
              <option value="English">English</option>
              <option value="Afrikaans">Afrikaans</option>
              <option value="Native">Native</option>
            </select>
            <!-- <div *ngIf="isControlInvalid('Language')" class="invalid-feedback">
              Language is required. -->
            </div>



          <div class="form-group">
            <label for="mobile" class="label-width">Mobile:</label>
            <div class="inputtag">
              <input type="text" id="mobile" formControlName="mobile"
                [ngClass]="{ 'is-invalid': isControlInvalid('mobile') }">
              <div *ngIf="isControlInvalid('mobile')" class="invalid-feedback">
                Mobile is not valid.
              </div>
            </div>
          </div>
        </div>
      </div>
      <button type="submit" [disabled]="userForm.invalid">Save</button>
    </mat-tab>
    <mat-tab label="Contact-details">
    

      <div class="dialog-content">
        <h2>Security Access Groups and Codes</h2>
        <div class="row">
          <div class="col">
            <div class="access-groups scrollable">
              <div *ngFor="let group of accessGroup; let i = index" class="access-group">
                <div class="access-group-item" (click)="toggleAccessCodes(i)" [ngClass]="{'clicked': group.selected}">
                  <div class="access-group-name">
                    <strong>{{ group.sAccessGroup }}</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col bg-white">
            <div class="access-codes scrollable">
              <div *ngFor="let group of accessGroup">
                 <div *ngIf="group.selected"> 
                  <div *ngFor="let code of group.sAccessCodes" class="access-code">{{ code }}</div>
                </div>
              </div>
            </div> 
          </div>
        </div>
      </div>
      <div class="row scrollable p-3">
        <div *ngFor="let accesscodes of accessCodes; let i = index" class="access-code p-2">
          <label class="checkbox-container">
            <input type="checkbox" class="code-checkbox" [(ngModel)]="accesscodes.selected">
            <span class="code-item">{{ accesscodes.sAccessCode }}</span>
            <span class="description-item">{{ accesscodes.SAccessDescription }}</span>
          </label>
        </div>
      </div>
    

        <button (click)="saveSelectedAccessCodes()">Save</button>

    </mat-tab>
  </mat-tab-group>

</form>
